algo: fmpc_socp
algo_config:
  horizon: 50
  r_mpc:
    - 1.0e-6
    - 1.0e-6
  q_mpc: 
    - 45
    - 0.001
    - 0.001
    - 0.001
    - 45
    - 0.001
    - 0.001
    - 0.001
  # Prior info
  prior_info:
    prior_prop: null
    randomize_prior_prop: False
    prior_prop_rand_info: null
  warmstart: True
  solver: ipopt 
  use_full_flat_reference: True
  use_acados: true 
  use_fast_gp: true  # Use FastGPNumpy for 5-10x speedup in GP inference
  verbose: false
  socp_config:
    beta_sqrt:
      - 2
      - 2
    slack_weight_stability: 250.0
    #slack_weight_dyn_ext: 250000.0
    slack_weight_dyn_ext: 700000.0
    slack_weight_state: 250000.0
    input_bound:
      - 10 # 5 works well with Q 17.
      - 1.5
    apply_thrust_constraint: True
    thrust_max: 0.43
    thrust_vel_max: 1.0 # Maximum thrust rate of change (T_c_dot) to prevent overshoot during transients
    # Solver configuration
    solver: CLARABEL  # Options: 'MOSEK' or 'CLARABEL'
    solver_options:
      # CLARABEL options (uncomment to use)
      iterative_refinement_enable: true
      tol_feas: 1.0e-6
      tol_gap_abs: 1.0e-6
      tol_gap_rel: 1.0e-6
      #tol_infeas_abs: 1.0e-6
      #tol_infeas_rel: 1.0e-6
      #tol_ktratio: 1.0e-5
      verbose: false
      # MOSEK options (uncomment when using MOSEK solver)
      #MSK_DPAR_INTPNT_CO_TOL_REL_GAP: 1.0e-6
      #MSK_DPAR_INTPNT_CO
      # MSK_TOL_PFEAS: 1.0e-6
      #MSK_DPAR_INTPNT_CO_TOL_DFEAS: 1.0e-6
    cvxpygen:
      enabled: true
      solver: 'CLARABEL'
      cache_dir: './generated_socp_code'
      force_regenerate: true 
      verbose: false 

  flat_state_constraint:
    apply_state_bound: True
    h_vect: [-1, 0, 0, 0, 0, 0, 0, 0]
    b_val: 0.8
    quantile: 3 # rho(delta) in safety filter
