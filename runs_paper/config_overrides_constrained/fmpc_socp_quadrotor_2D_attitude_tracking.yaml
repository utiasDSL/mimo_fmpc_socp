algo: fmpc_socp
algo_config:
  horizon: 40
  r_mpc:
    - 1.0e-6
    - 1.0e-6
  q_mpc: 
    - 50
    - 0.001
    - 0.1
    - 0.001
    - 50
    - 0.001
    - 0.1
    - 0.001
  # Prior info
  prior_info:
    prior_prop: null
    randomize_prior_prop: False
    prior_prop_rand_info: null
  warmstart: True
  solver: ipopt 
  use_full_flat_reference: True
  use_acados: true 

  socp_config:
    beta_sqrt:
      - 2
      - 2
    slack_weight_stability: 250.0
    slack_weight_dyn_ext: 250000.0
    slack_weight_state: 250000.0
    input_bound:
      - 10
      - 1.5
    apply_thrust_constraint: True
    thrust_max: 0.43
    # Solver configuration
    solver: CLARABEL  # Options: 'MOSEK' or 'CLARABEL'
    solver_options:
      # CLARABEL options (uncomment to use)
      iterative_refinement_enable: true
      tol_feas: 1.0e-6
      tol_gap_abs: 1.0e-6
      tol_gap_rel: 1.0e-6
      # MOSEK options (uncomment when using MOSEK solver)
      #MSK_DPAR_INTPNT_CO_TOL_REL_GAP: 1.0e-6
      #MSK_DPAR_INTPNT_CO_TOL_PFEAS: 1.0e-6
      #MSK_DPAR_INTPNT_CO_TOL_DFEAS: 1.0e-6
    cvxpygen:
      enabled: true 
      solver: 'CLARABEL'
      cache_dir: './generated_socp_code'
      force_regenerate: true
      verbose: true
      # Solver options - these get compiled into the generated code
      # NOTE: For Clarabel with CVXPYgen, these settings are BAKED IN at code generation
      # and CANNOT be changed at runtime. To change them, you must set force_regenerate: true
      solver_opts:
        tol_gap_abs: 1.0e-6
        tol_gap_rel: 1.0e-6
        tol_feas: 1.0e-6
        iterative_refinement_enable: true
        max_iter: 200
        verbose: true
  
  flat_state_constraint:
    apply_state_bound: True
    h_vect: [-1, 0, 0, 0, 0, 0, 0, 0]
    b_val: 0.8
    quantile: 3 # rho(delta) in safety filter